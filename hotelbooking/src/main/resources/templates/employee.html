<!DOCTYPE html>
<html xmlns:th="https://thymeleaf.org">
<head>
<title>Employee Panel</title>
</head>
<link th:replace="fragments/parts.html :: bootstrap_css">
<link rel="stylesheet" type="text/css" href="/css/style.css">
<body onload="navbarActivate('nav_user_panel')">
	<div th:replace="fragments/parts.html :: navbar"></div>
	<br>
	<h1>Employee Panel</h1>

	<div th:if="${param.success}">
		<div th:if="${success_msg}" class="alert alert-info"
			th:utext="${success_msg}">Success</div>
	</div>
	<div th:if="${param.error}">
		<div th:unless="${error_msg}" class="alert alert-danger">Error</div>
		<div th:if="${error_msg}" class="alert alert-danger"
			th:utext="${error_msg}">Error</div>
	</div>

	<div class="container px-5 my-5">
		<form id="contactForm" th:action="@{/employee}" method=post
			th:object="${search}">
			<div class="form-floating mb-3">
				<input class="form-control" id="search" th:field="*{search}"
					type="text" placeholder="search" required /> <label for="search">Search
					for user</label>
			</div>
			<div class="d-grid">
				<button class="btn btn-primary btn-lg" id="submitButton"
					type="submit">Search</button>
			</div>
		</form>
	</div>


	<table th:unless="${foundUsers}"
		class="table table-striped table-hover table-sm table-primary ">
		<thead>
			<tr>
				<th>User</th>
				<th>Last Name</th>
				<th>First Name</th>
				<th>Email</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			<tr th:each="user: ${users}">
				<td th:text="${user.role.name}" />
				<td th:text="${user.lastName}" />
				<td th:text="${user.firstName}" />
				<td th:text="${user.email}" />
				<td />
			</tr>
		</tbody>

	</table>

	<div th:if="${foundUsers}">

		<table class="table table-striped table-hover table-sm table-primary ">
			<thead>
				<tr>
					<th></th>
					<th>User</th>
					<th>Last Name</th>
					<th>First Name</th>
					<th>Email</th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="user: ${foundUsers}">
					<td><a class="btn btn-primary"
						th:href="@{/employee/resetUserPassword(email=${user.email})}">reset&nbsp;password</a></td>
					<td th:text="${user.role.name}" />
					<td th:text="${user.lastName}" />
					<td th:text="${user.firstName}" />
					<td th:text="${user.email}" />
					<td />
				</tr>
			</tbody>

		</table>

	</div>

	<table th:if="${foundUsers}"
		class="table table-striped table-hover table-sm table-success ">
		<thead>
			<tr>
				<th></th>
				<th>User</th>
				<th>Last Name</th>
				<th>First Name</th>
				<th>Email</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			<tr th:each="user: ${foundUsers}">
				<td><a class="btn btn-primary"
					th:href="@{/employee/resetUserPassword(email=${user.email})}">reset&nbsp;password</a></td>
				<td th:text="${user.role.name}" />
				<td th:text="${user.lastName}" />
				<td th:text="${user.firstName}" />
				<td th:text="${user.email}" />
				<td />
			</tr>
		</tbody>

	</table>
	</div>


	<script th:replace="fragments/parts.html :: bootstrap_script"></script>
	<script src="js/script.js" defer></script>
</body>
</html>